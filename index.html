<!DOCTYPE html>
<html lang="fr" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NetCmd Builder Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        zinc: {
                            850: '#1f1f22',
                            900: '#18181b',
                            950: '#09090b',
                        },
                        accent: {
                            500: '#6366f1', // Indigo
                            600: '#4f46e5',
                        }
                    },
                    fontSize: {
                        'xxs': '0.65rem',
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-zinc-950 text-zinc-300 font-sans antialiased h-screen flex flex-col overflow-hidden selection:bg-accent-500/20 selection:text-accent-200">

    <div class="flex-1 flex overflow-hidden">
        <!-- Sidebar -->
        <aside class="w-[260px] border-r border-zinc-800/60 bg-zinc-950 flex flex-col justify-between hidden md:flex shrink-0 z-30">
            <div>
                <!-- Brand -->
                <div class="h-14 flex items-center px-4 border-b border-zinc-800/60 justify-between">
                    <div class="flex items-center gap-2.5">
                        <div class="w-7 h-7 rounded-md bg-white text-zinc-950 flex items-center justify-center">
                            <iconify-icon icon="lucide:terminal-square" width="18"></iconify-icon>
                        </div>
                        <span class="text-sm font-semibold tracking-tight text-white">NetCmd<span class="text-zinc-500 font-normal">Pro</span></span>
                    </div>
                    <button class="text-zinc-500 hover:text-white transition-colors">
                        <iconify-icon icon="lucide:chevrons-left" width="16"></iconify-icon>
                    </button>
                </div>

                <!-- Search -->
                <div class="px-3 pt-4 pb-2">
                    <button id="search-button" class="w-full flex items-center justify-between px-3 py-1.5 bg-zinc-900/50 hover:bg-zinc-900 border border-zinc-800 hover:border-zinc-700 rounded-md text-xs text-zinc-400 transition-all group">
                        <div class="flex items-center gap-2">
                            <iconify-icon icon="lucide:search" width="14" class="group-hover:text-zinc-200"></iconify-icon>
                            <span>Rechercher...</span>
                        </div>
                        <kbd class="font-mono bg-zinc-800 px-1.5 py-0.5 rounded text-[10px] text-zinc-500">⌘K</kbd>
                    </button>
                </div>

                <!-- Navigation -->
                <nav class="flex-1 overflow-y-auto px-3 py-2 space-y-6">
                    <!-- Section 1 -->
                    <div class="space-y-0.5">
                        <div class="px-2 py-1.5 text-[11px] font-medium text-zinc-500 uppercase tracking-wider">Modules</div>
                        
                        <a href="#" data-module="firewall" class="flex items-center gap-2.5 px-2 py-1.5 text-sm text-white bg-zinc-800/60 rounded border border-zinc-700/50 shadow-sm transition-all">
                            <iconify-icon icon="lucide:shield" width="16" stroke-width="1.5" class="text-accent-500"></iconify-icon>
                            <span>Pare-feu (iptables)</span>
                        </a>
                        <a href="#" data-module="traffic" class="flex items-center gap-2.5 px-2 py-1.5 text-sm text-zinc-400 hover:text-zinc-100 hover:bg-zinc-900/60 rounded transition-all">
                            <iconify-icon icon="lucide:activity" width="16" stroke-width="1.5"></iconify-icon>
                            <span>Trafic (tcpdump)</span>
                        </a>
                        <a href="#" data-module="scan" class="flex items-center gap-2.5 px-2 py-1.5 text-sm text-zinc-400 hover:text-zinc-100 hover:bg-zinc-900/60 rounded transition-all">
                            <iconify-icon icon="lucide:radar" width="16" stroke-width="1.5"></iconify-icon>
                            <span>Scan (nmap)</span>
                        </a>
                    </div>

                    <!-- Section 2 -->
                    <div class="space-y-0.5">
                        <div class="px-2 py-1.5 text-[11px] font-medium text-zinc-500 uppercase tracking-wider">Bibliothèque</div>
                        
                        <a href="#" data-module="library" class="flex items-center gap-2.5 px-2 py-1.5 text-sm text-zinc-400 hover:text-zinc-100 hover:bg-zinc-900/60 rounded transition-all">
                            <iconify-icon icon="lucide:book-open" width="16" stroke-width="1.5"></iconify-icon>
                            <span>Bibliothèque de commandes</span>
                        </a>
                        <a href="#" data-module="favorites" class="flex items-center gap-2.5 px-2 py-1.5 text-sm text-zinc-400 hover:text-zinc-100 hover:bg-zinc-900/60 rounded transition-all">
                            <iconify-icon icon="lucide:star" width="16" stroke-width="1.5"></iconify-icon>
                            <span>Favoris</span>
                        </a>
                        <a href="#" class="flex items-center gap-2.5 px-2 py-1.5 text-sm text-zinc-400 hover:text-zinc-100 hover:bg-zinc-900/60 rounded transition-all">
                            <iconify-icon icon="lucide:folder-git-2" width="16" stroke-width="1.5"></iconify-icon>
                            <span>Projet Alpha</span>
                        </a>
                    </div>
                </nav>
            </div>

            <!-- User -->
            <div class="p-3 border-t border-zinc-800/60">
                <button class="flex items-center gap-3 w-full p-2 rounded-md hover:bg-zinc-900 transition-colors group">
                    <div class="w-8 h-8 rounded bg-gradient-to-br from-zinc-700 to-zinc-800 border border-zinc-600 flex items-center justify-center text-xs font-medium text-white shadow-inner">
                        JD
                    </div>
                    <div class="flex-1 text-left">
                        <div class="text-xs font-medium text-zinc-200 group-hover:text-white">John Doe</div>
                        <div class="text-[10px] text-zinc-500">Plan Pro</div>
                    </div>
                    <iconify-icon icon="lucide:more-vertical" width="14" class="text-zinc-500"></iconify-icon>
                </button>
            </div>
        </aside>

        <!-- Main Workspace -->
        <main class="flex-1 flex flex-col min-w-0 bg-[#0c0c0e] relative">
            
            <!-- Header -->
            <header class="h-14 border-b border-zinc-800/60 flex items-center justify-between px-6 bg-zinc-950/80 backdrop-blur-md sticky top-0 z-20">
                <div class="flex items-center gap-2 text-sm">
                    <span class="text-zinc-500">Builder</span>
                    <span class="text-zinc-700">/</span>
                    <span class="text-zinc-200 font-medium">Nouvelle Règle</span>
                    <span class="px-2 py-0.5 rounded-full bg-yellow-500/10 text-yellow-500 text-[10px] border border-yellow-500/20 ml-2">Non enregistré</span>
                </div>
                
                <div class="flex items-center gap-3">
                    <button id="btn-open-library" class="flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800/50 rounded-md transition-all">
                        <iconify-icon icon="lucide:book-open" width="14"></iconify-icon>
                        Bibliothèque de commandes
                    </button>
                    <div class="h-4 w-px bg-zinc-800"></div>
                    <button id="btn-open-favorites" class="flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-amber-300 bg-amber-900/30 hover:bg-amber-900/50 border border-amber-500/40 rounded-md shadow-[0_0_15px_-3px_rgba(251,191,36,0.3)] transition-all">
                        <iconify-icon icon="lucide:star" width="14"></iconify-icon>
                        Favoris
                    </button>
                </div>
            </header>

            <!-- Content Grid -->
            <div class="flex-1 overflow-y-auto">
                <div class="max-w-[1600px] mx-auto p-6 lg:p-8">
                    
                    <!-- Module Pare-feu (iptables) -->
                    <div id="module-firewall" class="grid grid-cols-1 xl:grid-cols-12 gap-8">
                        
                        <!-- Left: Configuration Panel -->
                        <div class="xl:col-span-7 space-y-6">
                            
                            <!-- Section Header -->
                            <div class="flex items-end justify-between mb-2">
                                <div>
                                    <h2 class="text-lg font-medium text-white tracking-tight">Configuration de la Règle</h2>
                                    <p class="text-xs text-zinc-500 mt-1">Configurez les règles de filtrage de paquets pour le noyau Linux.</p>
                                    <p class="text-[10px] text-zinc-600 mt-1">À exécuter dans un terminal Linux (serveur, VM, WSL) et non directement dans l’invite de commandes Windows.</p>
                                </div>
                                <button onclick="resetForm()" class="text-xs text-accent-500 hover:text-accent-400 flex items-center gap-1 transition-colors">
                                    <iconify-icon icon="lucide:rotate-ccw" width="12"></iconify-icon> Réinitialiser
                                </button>
                            </div>

                            <!-- Form Container -->
                            <div class="bg-zinc-900/20 border border-zinc-800 rounded-xl overflow-hidden shadow-sm" id="main-form">
                                
                                <!-- Core Direction -->
                                <div class="p-5 border-b border-zinc-800/50 grid grid-cols-1 md:grid-cols-3 gap-6">
                                    <div class="space-y-1.5">
                                        <label class="text-[11px] font-medium text-zinc-400 uppercase tracking-wider">Chaîne</label>
                                        <div class="relative group">
                                            <select id="chain-select" class="custom-select w-full bg-zinc-950 border border-zinc-800 text-zinc-200 text-sm rounded-lg pl-3 pr-10 py-2.5 appearance-none focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/20 transition-all shadow-sm">
                                                <option value="INPUT">INPUT (Entrant)</option>
                                                <option value="OUTPUT">OUTPUT (Sortant)</option>
                                                <option value="FORWARD">FORWARD (Routage)</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="space-y-1.5">
                                        <label class="text-[11px] font-medium text-zinc-400 uppercase tracking-wider">Action</label>
                                        <div class="grid grid-cols-2 bg-zinc-950 p-1 rounded-lg border border-zinc-800">
                                            <input type="hidden" id="input-action" value="ACCEPT">
                                            <button id="btn-accept" onclick="setAction('ACCEPT')" class="py-1.5 text-xs font-medium rounded action-active shadow-sm border border-emerald-500/20 flex items-center justify-center gap-1.5 transition-all">
                                                <iconify-icon icon="lucide:check" width="12"></iconify-icon> ACCEPT
                                            </button>
                                            <button data-action-value="DROP" class="firewall-action py-1.5 text-xs font-medium rounded text-zinc-500 hover:text-zinc-300 flex items-center justify-center gap-1.5 transition-colors">
                                                <iconify-icon icon="lucide:ban" width="12"></iconify-icon> DROP
                                            </button>
                                        </div>
                                    </div>

                                    <div class="space-y-1.5">
                                        <label class="text-[11px] font-medium text-zinc-400 uppercase tracking-wider">Protocole</label>
                                        <div class="relative group">
                                            <select id="protocol-select" class="custom-select w-full bg-zinc-950 border border-zinc-800 text-zinc-200 text-sm rounded-lg pl-3 pr-10 py-2.5 appearance-none focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/20 transition-all shadow-sm">
                                                <option value="tcp">TCP</option>
                                                <option value="udp">UDP</option>
                                                <option value="icmp">ICMP</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <!-- Detailed Rules -->
                                <div class="p-5 space-y-6">
                                    
                                    <!-- Network & Interface -->
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div class="space-y-3">
                                            <label class="flex items-center gap-2 text-xs font-medium text-zinc-300">
                                                <iconify-icon icon="lucide:globe" width="14" class="text-zinc-500"></iconify-icon>
                                                Source / Destination
                                            </label>
                                            <div class="flex gap-2">
                                                <input id="source-input" type="text" class="flex-1 bg-zinc-950 border border-zinc-800 text-zinc-200 text-sm rounded-md px-3 py-2 font-mono placeholder-zinc-700 focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/20" placeholder="0.0.0.0/0">

                                                <select id="input-ip-type" onchange="updateCommand()" class="bg-zinc-950 border border-zinc-800 text-zinc-400 text-xs rounded-md px-2 focus:outline-none">
                                                    <option value="src">Src</option>
                                                    <option value="dst">Dst</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="space-y-3">
                                            <label class="flex items-center gap-2 text-xs font-medium text-zinc-300">
                                                <iconify-icon icon="lucide:network" width="14" class="text-zinc-500"></iconify-icon>
                                                Interface
                                            </label>
                                            <div class="flex gap-2">
                                                <input id="iface-input" type="text" class="flex-1 bg-zinc-950 border border-zinc-800 text-zinc-200 text-sm rounded-md px-3 py-2 font-mono placeholder-zinc-700 focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/20" placeholder="eth0">

                                                <div class="flex items-center gap-1.5 px-2">
                                                    <input type="checkbox" id="inv-iface" onchange="updateCommand()" class="rounded border-zinc-700 bg-zinc-800 text-accent-500 focus:ring-offset-zinc-950 focus:ring-accent-500/50">
                                                    <label for="inv-iface" class="text-xs text-zinc-500 select-none">Exclure</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Ports & States -->
                                    <div class="grid grid-cols-1 md:grid-cols-12 gap-6">
                                        <div class="md:col-span-4 space-y-3">
                                            <label class="flex items-center gap-2 text-xs font-medium text-zinc-300">
                                                <iconify-icon icon="lucide:door-closed" width="14" class="text-zinc-500"></iconify-icon>
                                                Ports (séparés par virgule)
                                            </label>
                                            <input type="text" id="input-ports" value="80,443" class="w-full bg-zinc-950 border border-zinc-800 text-zinc-200 text-sm rounded-md px-3 py-2 font-mono placeholder-zinc-700 focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/20">
                                            <div class="flex gap-2 mt-1.5">
                                                <button onclick="setPort('22')" class="px-1.5 py-0.5 bg-zinc-800 rounded text-[10px] text-zinc-400 border border-zinc-700 cursor-pointer hover:text-white transition-colors">SSH (22)</button>
                                                <button onclick="setPort('53')" class="px-1.5 py-0.5 bg-zinc-800 rounded text-[10px] text-zinc-400 border border-zinc-700 cursor-pointer hover:text-white transition-colors">DNS (53)</button>
                                            </div>
                                        </div>

                                        <div class="md:col-span-8 space-y-3">
                                            <label class="flex items-center gap-2 text-xs font-medium text-zinc-300">
                                                <iconify-icon icon="lucide:link" width="14" class="text-zinc-500"></iconify-icon>
                                                État de connexion (conntrack)
                                            </label>
                                            <div class="grid grid-cols-2 sm:grid-cols-4 gap-2">
                                                <label class="cursor-pointer select-none">
                                                    <input type="checkbox" data-state="NEW" class="peer sr-only" checked>
                                                    <div class="px-3 py-2 rounded-md border border-zinc-800 bg-zinc-950 text-xs text-zinc-500 text-center peer-checked:bg-accent-500/10 peer-checked:text-accent-400 peer-checked:border-accent-500/30 transition-all hover:bg-zinc-900">NEW</div>
                                                </label>
                                                <label class="cursor-pointer select-none">
                                                    <input type="checkbox" id="chk-estab" onchange="updateCommand()" class="peer sr-only" checked>
                                                    <div class="px-3 py-2 rounded-md border border-zinc-800 bg-zinc-950 text-xs text-zinc-500 text-center peer-checked:bg-accent-500/10 peer-checked:text-accent-400 peer-checked:border-accent-500/30 transition-all hover:bg-zinc-900">ESTAB</div>
                                                </label>
                                                <label class="cursor-pointer select-none">
                                                    <input type="checkbox" data-state="RELATED" class="peer sr-only">
                                                    <div class="px-3 py-2 rounded-md border border-zinc-800 bg-zinc-950 text-xs text-zinc-500 text-center peer-checked:bg-accent-500/10 peer-checked:text-accent-400 peer-checked:border-accent-500/30 transition-all hover:bg-zinc-900">RELATED</div>
                                                </label>
                                                <label class="cursor-pointer select-none">
                                                    <input type="checkbox" data-state="INVALID" class="peer sr-only">
                                                    <div class="px-3 py-2 rounded-md border border-zinc-800 bg-zinc-950 text-xs text-zinc-500 text-center peer-checked:bg-red-500/10 peer-checked:text-red-400 peer-checked:border-red-500/30 transition-all hover:bg-zinc-900">INVALID</div>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Advanced Toggle -->
                                <div class="px-5 py-3 bg-zinc-950/50 border-t border-zinc-800/50">
                                    <details class="group">
                                        <summary class="flex items-center gap-2 text-xs font-medium text-zinc-500 cursor-pointer hover:text-zinc-300 list-none">
                                            <iconify-icon icon="lucide:chevron-right" width="12" class="transition-transform group-open:rotate-90"></iconify-icon>
                                            Options Avancées (Logs, Limites)
                                        </summary>
                                        <div class="pt-4 pb-2 grid grid-cols-1 sm:grid-cols-2 gap-4">
                                            <div class="space-y-2">
                                                <label class="text-xs text-zinc-400">Prefixe Log</label>
                                                <input type="text" id="input-log" class="w-full bg-zinc-900 border border-zinc-800 text-zinc-300 text-xs rounded px-2 py-1.5 focus:border-zinc-600 focus:outline-none" placeholder="[IPTABLES]:">
                                            </div>
                                            <div class="space-y-2">
                                                <label class="text-xs text-zinc-400">Limite de Taux</label>
                                                <div class="flex gap-2">
                                                    <input type="number" id="input-limit" class="w-20 bg-zinc-900 border border-zinc-800 text-zinc-300 text-xs rounded px-2 py-1.5 focus:border-zinc-600 focus:outline-none" placeholder="5">
                                                    <span class="text-xs text-zinc-600 self-center">/min</span>
                                                </div>
                                            </div>
                                        </div>
                                    </details>
                                </div>
                            </div>

                            <!-- Traffic Visualizer (New Feature) -->
                            <div class="border border-zinc-800 rounded-xl bg-[#0e0e11] overflow-hidden">
                                <div class="px-4 py-3 border-b border-zinc-800 flex items-center justify-between">
                                    <h3 class="text-xs font-medium text-zinc-400 uppercase tracking-wider">Logique du Flux</h3>
                                    <div class="flex items-center gap-1.5">
                                        <div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
                                        <span class="text-[10px] text-zinc-500">Simulation Live</span>
                                    </div>
                                </div>
                                <div class="p-6 relative">
                                    <div class="absolute inset-0 bg-grid opacity-20 pointer-events-none"></div>
                                    
                                    <div class="relative flex items-center justify-between gap-4">
                                        <!-- Step 1: Source -->
                                        <div class="flex flex-col items-center gap-2">
                                            <div class="w-10 h-10 rounded-lg bg-zinc-900 border border-zinc-700 flex items-center justify-center text-zinc-400 transition-all duration-300" id="vis-source-icon">
                                                <iconify-icon icon="lucide:globe" width="20"></iconify-icon>
                                            </div>
                                            <span class="text-[10px] font-mono text-zinc-500" id="vis-source-text">IP Source</span>
                                        </div>
                                        
                                        <!-- Connector -->
                                        <div class="flex-1 h-px bg-zinc-800 relative">
                                            <div class="absolute left-1/2 -top-2 -translate-x-1/2 px-2 bg-[#0e0e11] text-[10px] text-zinc-600 whitespace-nowrap" id="vis-iface">Interface eth0</div>
                                            <iconify-icon icon="lucide:chevron-right" class="absolute right-0 -top-1.5 text-zinc-700" width="12"></iconify-icon>
                                        </div>

                                        <!-- Step 2: Filter -->
                                        <div class="flex flex-col items-center gap-2">
                                            <div class="w-12 h-12 rounded-lg bg-indigo-500/10 border border-indigo-500/50 flex items-center justify-center text-indigo-400 shadow-[0_0_15px_-5px_rgba(99,102,241,0.3)] transition-all">
                                                <iconify-icon icon="lucide:filter" width="20"></iconify-icon>
                                            </div>
                                            <span class="text-[10px] font-mono text-indigo-400">Match Règle</span>
                                        </div>

                                        <!-- Connector -->
                                        <div class="flex-1 h-px bg-zinc-800 relative">
                                            <div class="absolute left-1/2 -top-2 -translate-x-1/2 px-2 bg-[#0e0e11] text-[10px] text-zinc-600 whitespace-nowrap" id="vis-ports">TCP: 80, 443</div>
                                            <iconify-icon icon="lucide:chevron-right" class="absolute right-0 -top-1.5 text-zinc-700" width="12"></iconify-icon>
                                        </div>

                                        <!-- Step 3: Action -->
                                        <div class="flex flex-col items-center gap-2">
                                            <div id="vis-action-box" class="w-10 h-10 rounded-lg bg-emerald-900/20 border border-emerald-500/50 flex items-center justify-center text-emerald-500 transition-colors duration-300">
                                                <iconify-icon id="vis-action-icon" icon="lucide:check-circle" width="20"></iconify-icon>
                                            </div>
                                            <span id="vis-action-text" class="text-[10px] font-mono text-emerald-500 transition-colors duration-300">ACCEPT</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Right: Output & Export -->
                        <div class="xl:col-span-5 flex flex-col gap-6">
                            
                            <!-- Output Card -->
                            <div class="bg-[#121214] border border-zinc-800 rounded-xl flex flex-col shadow-2xl h-full max-h-[600px]">
                                <!-- Toolbar -->
                                <div class="h-10 bg-zinc-900/50 border-b border-zinc-800 px-3 flex items-center justify-between shrink-0">
                                    <div class="flex items-center gap-1">
                                        <button class="px-3 py-1 text-xs font-medium text-white bg-zinc-800 rounded-sm shadow-sm border border-zinc-700">Bash</button>
                                        <button class="px-3 py-1 text-xs font-medium text-zinc-500 hover:text-zinc-300 transition-colors">Ansible</button>
                                        <button class="px-3 py-1 text-xs font-medium text-zinc-500 hover:text-zinc-300 transition-colors">Terraform</button>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <button onclick="copyToClipboard()" class="text-zinc-500 hover:text-white transition-colors p-1" title="Copier">
                                            <iconify-icon icon="lucide:copy" width="14"></iconify-icon>
                                        </button>
                                        <button class="text-zinc-500 hover:text-white transition-colors p-1" title="Télécharger">
                                            <iconify-icon icon="lucide:download" width="14"></iconify-icon>
                                        </button>
                                    </div>
                                </div>

                                <!-- Code Area -->
                                <div class="p-4 overflow-x-auto font-mono text-xs leading-relaxed flex-1" id="code-output">
                                    <!-- Dynamic content will be loaded here -->
                                </div>
                                
                                <!-- Execution Bar -->
                                <div class="p-3 border-t border-zinc-800 bg-zinc-900/30">
                                    <button class="w-full flex items-center justify-center gap-2 bg-zinc-100 hover:bg-white text-zinc-950 font-semibold py-2 rounded text-xs transition-all shadow-[0_0_20px_-5px_rgba(255,255,255,0.3)]">
                                        <iconify-icon icon="lucide:terminal" width="14"></iconify-icon>
                                        Déployer sur le Serveur
                                    </button>
                                </div>
                            </div>

                            <!-- Context Help -->
                            <div class="border border-zinc-800/50 rounded-xl bg-zinc-900/20 p-5 space-y-4">
                                <div class="flex items-center gap-2">
                                    <iconify-icon icon="lucide:book-open" class="text-accent-500" width="16"></iconify-icon>
                                    <span class="text-sm font-medium text-zinc-200">Aide contextuelle</span>
                                </div>
                                <div class="space-y-3">
                                    <div class="text-xs text-zinc-400 leading-relaxed">
                                        <span class="text-zinc-200 font-medium">conntrack:</span> L'état <code class="bg-zinc-800 px-1 py-0.5 rounded text-zinc-300">NEW</code> correspond au premier paquet. <code class="bg-zinc-800 px-1 py-0.5 rounded text-zinc-300">ESTABLISHED</code> concerne les paquets d'une connexion déjà établie (bidirectionnel).
                                    </div>
                                    <a href="#" class="inline-flex items-center gap-1 text-xs text-accent-400 hover:text-accent-300">
                                        Lire le manuel <iconify-icon icon="lucide:arrow-right" width="10"></iconify-icon>
                                    </a>
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- Module Trafic (tcpdump) -->
                    <div id="module-traffic" class="hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <div class="space-y-6">
                                <div class="flex items-end justify-between mb-2">
                                    <div>
                                        <h2 class="text-lg font-medium text-white tracking-tight">Analyse du trafic (tcpdump)</h2>
                                        <p class="text-xs text-zinc-500 mt-1">Construisez une commande tcpdump pour inspecter le trafic réseau.</p>
                                        <p class="text-[10px] text-zinc-600 mt-1">Commandes prévues pour Linux (ou équivalent WinDump sous Windows). À lancer dans un shell Linux/WSL ou avec windump.exe.</p>
                                    </div>
                                </div>

                                <div class="bg-zinc-900/20 border border-zinc-800 rounded-xl p-5 space-y-5">
                                    <div class="space-y-2">
                                        <label class="text-[11px] font-medium text-zinc-400 uppercase tracking-wider">Interface</label>
                                        <input id="traffic-iface" type="text" class="w-full bg-zinc-950 border border-zinc-800 text-zinc-200 text-sm rounded-md px-3 py-2 font-mono placeholder-zinc-700 focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/20" placeholder="eth0">
                                    </div>

                                    <div class="space-y-2">
                                        <label class="text-[11px] font-medium text-zinc-400 uppercase tracking-wider">Filtre BPF</label>
                                        <input id="traffic-filter" type="text" class="w-full bg-zinc-950 border border-zinc-800 text-zinc-200 text-sm rounded-md px-3 py-2 font-mono placeholder-zinc-700 focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/20" placeholder="tcp port 80 or udp port 53">
                                    </div>

                                    <div class="grid grid-cols-2 gap-4">
                                        <div class="space-y-2">
                                            <label class="text-[11px] font-medium text-zinc-400 uppercase tracking-wider">Capture</label>
                                            <select id="traffic-mode" class="custom-select w-full bg-zinc-950 border border-zinc-800 text-zinc-200 text-sm rounded-lg pl-3 pr-10 py-2.5 appearance-none focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/20">
                                                <option value="live">Live (terminal)</option>
                                                <option value="pcap">Vers fichier .pcap</option>
                                            </select>
                                        </div>
                                        <div class="space-y-2">
                                            <label class="text-[11px] font-medium text-zinc-400 uppercase tracking-wider">Fichier (si pcap)</label>
                                            <input id="traffic-file" type="text" class="w-full bg-zinc-950 border border-zinc-800 text-zinc-200 text-sm rounded-md px-3 py-2 font-mono placeholder-zinc-700 focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/20" placeholder="capture.pcap">
                                        </div>
                                    </div>

                                    <button id="traffic-build" class="w-full flex items-center justify-center gap-2 bg-accent-600 hover:bg-accent-500 text-xs font-medium text-white py-2 rounded-md border border-accent-500/60 shadow-[0_0_20px_-5px_rgba(99,102,241,0.4)] transition-all">
                                        <iconify-icon icon="lucide:activity" width="14"></iconify-icon>
                                        Générer la commande tcpdump
                                    </button>
                                </div>
                            </div>

                            <div class="flex flex-col gap-6">
                                <div class="bg-[#121214] border border-zinc-800 rounded-xl flex flex-col shadow-2xl h-full">
                                    <div class="h-10 bg-zinc-900/50 border-b border-zinc-800 px-3 flex items-center justify-between">
                                        <div class="flex items-center gap-1 text-xs text-zinc-500">
                                            <span class="px-2 py-0.5 rounded bg-zinc-800 text-zinc-200">tcpdump</span>
                                        </div>
                                    </div>
                                    <div id="traffic-output" class="p-4 font-mono text-xs leading-relaxed text-zinc-200">
                                        <span class="text-zinc-500"># La commande tcpdump générée apparaîtra ici</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Module Scan (nmap) -->
                    <div id="module-scan" class="hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <div class="space-y-6">
                                <div class="flex items-end justify-between mb-2">
                                    <div>
                                        <h2 class="text-lg font-medium text-white tracking-tight">Scan de ports (nmap)</h2>
                                        <p class="text-xs text-zinc-500 mt-1">Générez une commande nmap pour auditer une cible.</p>
                                        <p class="text-[10px] text-zinc-600 mt-1">nmap existe sous Linux et Windows. Installez nmap pour votre OS puis exécutez ces commandes dans le terminal adapté.</p>
                                    </div>
                                </div>

                                <div class="bg-zinc-900/20 border border-zinc-800 rounded-xl p-5 space-y-5">
                                    <div class="space-y-2">
                                        <label class="text-[11px] font-medium text-zinc-400 uppercase tracking-wider">Cible</label>
                                        <input id="scan-target" type="text" class="w-full bg-zinc-950 border border-zinc-800 text-zinc-200 text-sm rounded-md px-3 py-2 font-mono placeholder-zinc-700 focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/20" placeholder="192.168.1.0/24">
                                    </div>

                                    <div class="grid grid-cols-2 gap-4">
                                        <div class="space-y-2">
                                            <label class="text-[11px] font-medium text-zinc-400 uppercase tracking-wider">Profil</label>
                                            <select id="scan-profile" class="custom-select w-full bg-zinc-950 border border-zinc-800 text-zinc-200 text-sm rounded-lg pl-3 pr-10 py-2.5 appearance-none focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/20">
                                                <option value="-sS -Pn -T4">Scan rapide TCP SYN</option>
                                                <option value="-sV -sC -O -T4">Scan complet (services + scripts)</option>
                                                <option value="-sn">Ping sweep (découverte hôtes)</option>
                                            </select>
                                        </div>
                                        <div class="space-y-2">
                                            <label class="text-[11px] font-medium text-zinc-400 uppercase tracking-wider">Ports</label>
                                            <input id="scan-ports" type="text" class="w-full bg-zinc-950 border border-zinc-800 text-zinc-200 text-sm rounded-md px-3 py-2 font-mono placeholder-zinc-700 focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/20" placeholder="1-1024,80,443">
                                        </div>
                                    </div>

                                    <div class="space-y-2">
                                        <label class="text-[11px] font-medium text-zinc-400 uppercase tracking-wider">Options supplémentaires</label>
                                        <input id="scan-extra" type="text" class="w-full bg-zinc-950 border border-zinc-800 text-zinc-200 text-sm rounded-md px-3 py-2 font-mono placeholder-zinc-700 focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/20" placeholder="--open -vv">
                                    </div>

                                    <button id="scan-build" class="w-full flex items-center justify-center gap-2 bg-accent-600 hover:bg-accent-500 text-xs font-medium text-white py-2 rounded-md border border-accent-500/60 shadow-[0_0_20px_-5px_rgba(99,102,241,0.4)] transition-all">
                                        <iconify-icon icon="lucide:radar" width="14"></iconify-icon>
                                        Générer la commande nmap
                                    </button>
                                </div>
                            </div>

                            <div class="flex flex-col gap-6">
                                <div class="bg-[#121214] border border-zinc-800 rounded-xl flex flex-col shadow-2xl h-full">
                                    <div class="h-10 bg-zinc-900/50 border-b border-zinc-800 px-3 flex items-center justify-between">
                                        <div class="flex items-center gap-1 text-xs text-zinc-500">
                                            <span class="px-2 py-0.5 rounded bg-zinc-800 text-zinc-200">nmap</span>
                                        </div>
                                        <button onclick="copyOutput('scan-output')" class="text-zinc-500 hover:text-white transition-colors p-1" title="Copier la commande">
                                            <iconify-icon icon="lucide:copy" width="14"></iconify-icon>
                                        </button>
                                    </div>
                                    <div id="scan-output" class="p-4 font-mono text-xs leading-relaxed text-zinc-200">
                                        <span class="text-zinc-500"># La commande nmap générée apparaîtra ici</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Module Bibliothèque de commandes -->
                    <div id="module-library" class="hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <div class="space-y-6">
                                <div class="flex items-end justify-between mb-2">
                                    <div>
                                        <h2 class="text-lg font-medium text-white tracking-tight">Bibliothèque de commandes</h2>
                                        <p class="text-xs text-zinc-500 mt-1">Recherchez une tâche et obtenez les commandes adaptées à votre OS.</p>
                                    </div>
                                </div>

                                <div class="bg-zinc-900/20 border border-zinc-800 rounded-xl p-5 space-y-4">
                                    <div class="space-y-2">
                                        <label class="text-[11px] font-medium text-zinc-400 uppercase tracking-wider">Requête</label>
                                        <input id="cmdlib-query" type="text" class="w-full bg-zinc-950 border border-zinc-800 text-zinc-200 text-sm rounded-md px-3 py-2 placeholder-zinc-700 focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/20" placeholder="Ex: configurer un switch Huawei, installer gedit...">
                                    </div>

                                    <div class="space-y-2">
                                        <label class="text-[11px] font-medium text-zinc-400 uppercase tracking-wider">Système</label>
                                        <div class="inline-flex items-center gap-2 bg-zinc-950 border border-zinc-800 rounded-lg p-1 text-xs">
                                            <button type="button" data-os="windows" class="cmdlib-os px-3 py-1 rounded-md bg-accent-600 text-white">Windows</button>
                                            <button type="button" data-os="macos" class="cmdlib-os px-3 py-1 rounded-md text-zinc-300 hover:bg-zinc-800">macOS</button>
                                            <button type="button" data-os="linux" class="cmdlib-os px-3 py-1 rounded-md text-zinc-300 hover:bg-zinc-800">Linux</button>
                                        </div>
                                        <input type="hidden" id="cmdlib-os" value="windows">
                                    </div>

                                    <button id="cmdlib-search" class="w-full flex items-center justify-center gap-2 bg-accent-600 hover:bg-accent-500 text-xs font-medium text-white py-2 rounded-md border border-accent-500/60 shadow-[0_0_20px_-5px_rgba(99,102,241,0.4)] transition-all">
                                        <iconify-icon icon="lucide:search" width="14"></iconify-icon>
                                        Rechercher des commandes
                                    </button>
                                </div>
                            </div>

                            <div class="flex flex-col gap-4">
                                <div class="bg-[#121214] border border-zinc-800 rounded-xl flex flex-col shadow-2xl h-full">
                                    <div class="h-10 bg-zinc-900/50 border-b border-zinc-800 px-3 flex items-center justify-between">
                                        <div class="flex items-center gap-2 text-xs text-zinc-500">
                                            <iconify-icon icon="lucide:library" width="14"></iconify-icon>
                                            <span>Résultats</span>
                                        </div>
                                    </div>
                                    <div id="cmdlib-results" class="p-4 space-y-4 text-xs text-zinc-200 overflow-y-auto max-h-[520px]">
                                        <p class="text-zinc-500">Tapez une requête pour voir les commandes proposées.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Module Favoris -->
                    <div id="module-favorites" class="hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <div class="space-y-6">
                                <div class="flex items-end justify-between mb-2">
                                    <div>
                                        <h2 class="text-lg font-medium text-white tracking-tight">Favoris</h2>
                                        <p class="text-xs text-zinc-500 mt-1">Retrouvez vos commandes enregistrées en favoris, filtrées par OS.</p>
                                    </div>
                                </div>

                                <div class="bg-zinc-900/20 border border-zinc-800 rounded-xl p-5 space-y-4">
                                    <div class="space-y-2">
                                        <label class="text-[11px] font-medium text-zinc-400 uppercase tracking-wider">Système</label>
                                        <div class="inline-flex items-center gap-2 bg-zinc-950 border border-zinc-800 rounded-lg p-1 text-xs">
                                            <button type="button" data-os="windows" class="fav-os px-3 py-1 rounded-md bg-accent-600 text-white">Windows</button>
                                            <button type="button" data-os="macos" class="fav-os px-3 py-1 rounded-md text-zinc-300 hover:bg-zinc-800">macOS</button>
                                            <button type="button" data-os="linux" class="fav-os px-3 py-1 rounded-md text-zinc-300 hover:bg-zinc-800">Linux</button>
                                        </div>
                                        <input type="hidden" id="fav-os" value="windows">
                                    </div>
                                    <p class="text-[11px] text-zinc-500">Ajoutez des recettes en favoris depuis la Bibliothèque pour les voir ici.</p>
                                </div>
                            </div>

                            <div class="flex flex-col gap-4">
                                <div class="bg-[#121214] border border-zinc-800 rounded-xl flex flex-col shadow-2xl h-full">
                                    <div class="h-10 bg-zinc-900/50 border-b border-zinc-800 px-3 flex items-center justify-between">
                                        <div class="flex items-center gap-2 text-xs text-zinc-500">
                                            <iconify-icon icon="lucide:star" width="14"></iconify-icon>
                                            <span>Commandes favorites</span>
                                        </div>
                                    </div>
                                    <div id="fav-results" class="p-4 space-y-4 text-xs text-zinc-200 overflow-y-auto max-h-[520px]">
                                        <p class="text-zinc-500">Aucun favori pour le moment.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer Status Bar -->
            <footer class="h-8 bg-zinc-950 border-t border-zinc-800 flex items-center justify-between px-4 text-[10px] text-zinc-500 select-none">
                <div class="flex items-center gap-4">
                    <div class="flex items-center gap-1.5 hover:text-zinc-300 cursor-pointer transition-colors">
                        <iconify-icon icon="lucide:wifi" width="10"></iconify-icon>
                        <span>Connecté: cluster-local-1</span>
                    </div>
                    <div class="flex items-center gap-1.5 hover:text-zinc-300 cursor-pointer transition-colors">
                        <iconify-icon icon="lucide:git-branch" width="10"></iconify-icon>
                        <span>main*</span>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <span>UTF-8</span>
                    <span class="hover:text-zinc-300 cursor-pointer">Feedback</span>
                    <div class="flex items-center gap-1.5">
                        <div class="w-1.5 h-1.5 rounded-full bg-emerald-500"></div>
                        <span id="status-text" class="text-emerald-500">Systems Operational</span>
                    </div>
                </div>
            </footer>
        </main>
    </div>

    <script src="script.js"></script>

</body>
</html>